"""
 This file is part of nucypher.

 nucypher is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 nucypher is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.

 You should have received a copy of the GNU Affero General Public License
 along with nucypher.  If not, see <https://www.gnu.org/licenses/>.
"""

import pytest

from constant_sorrow.constants import UNKNOWN_VERSION

from nucypher.characters.lawful import Ursula
from nucypher.config.constants import TEMPORARY_DOMAIN
from nucypher.network.nodes import Teacher


# The following hard-coded hex-strings are versioned Ursulas' metadata.
# These hex strings were generated using the code in tests.utils.versions.test_print_ursulas_bytes(),
# a script in the form of a test, that simply uses the blockchain_ursula fixture.

ursulas_v1 = (
    '0001e57bfe9f44b819898f47bf37e5af72a0783e114100000016000000123a74656d706f726172792d646f6d61696e3a5f593d2c83aaa6a200696737d89ad9f746b867c6a04510be21f56225cbe7528f1c48326bd2b70a0dfd5c632cd274d7b6371c76ca886fe98dbd0686ebdf20e90fda6ae9f300000041b5fcdf6998f1f41532e933aa3f507222ca3bf44a54c3d355c6f2538909984b234ce7218ae72239156b39d318d2f0e8735c4d5fe236278e60913305ec362af94b1b032569686b730892f78b06bd8fe8af83307ae6db27d4fd81eaf7cceb70ff15612f02d8486449e324133937c1f9118688cf464855bee69c1e36c36228186c0b9f48f0000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949423554434341577167417749424167495551475559566c4c46726434503035616c79463576746957522f6d6377436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654555314e324a4752546c474e4452694f4445350a4f446b34526a5133516b597a4e305531515559334d6d45774e7a677a5a5445784e4445774868634e4d6a41774f5441354d6a417a4e6a41775768634e4d6a45770a4f5441354d6a417a4e6a4177576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234525455330a596b5a464f5559304e4749344d546b344f5468474e446443526a4d3352545642526a6379595441334f444e6c4d5445304d5442324d42414742797147534d34390a41674547425375424241416941324941424c73686a696177584a597237314f656143746b54467144416a72466b73644c4f454b7842795079316d6e56675a2b520a3173526d6f4d377a3743524b4b4f7856444f762b4b447355555a55324b6539497579737870675549537365556242707a674542556d6e6a775a4551554d5244760a35416f4c622b6e59326131657743717572364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e700a4144426d416a45416a4f4c58516a65322b5a754a474845514d3468734370324f69737632537954342b4145466c47622f716c636d7537386c6c356e564737774e0a5969797736696b5a416a4541674e7a67315063514b577838554d4d78674f456378364c4d4c73356b47617176657653537050436d336a47696e445a2b725131340a3777584136536e6576327a630a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79c',
    '0001d41c057fd1c78805aac12b0a94a405c0461a6fbb00000016000000123a74656d706f726172792d646f6d61696e3a5f593d2c5c35512cf82c363ad0510316a52bc536b7e50bc2bc26d2e7e027e89599df1f68f09fbce21e454f463a60d695400c32020a7e3e1525c36b084c0c5d62d3b4018f00000041037dce12ecc6269d2fd625a2d3f33af08144ed23a16e3c3e83fb5e97c9bb45565b09a3bddf5df1d386eed1aa8d6761b510a1aa89393f723eac53c425f3e39fec1c02d4a211f477e6eda76623846910c5cf360db9cd21e94e1ff03978edb59a6617580248680b0bd97031ef98a26153f2470d5b516fa172a9fc178c8bc5b7fe1566cab0000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749554f392f69322f3248546754627958744f362b386a36655a5866336f77436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654751304d574d774e54646d5a44466a4e7a67340a4d44564251554d784d6b497751546b30595451774e574d774e44597851545a47516d49774868634e4d6a41774f5441354d6a417a4e6a457a5768634e4d6a45770a4f5441354d6a417a4e6a457a576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42345a4451780a597a41314e325a6b4d574d334f4467774e554642517a4579516a42424f5452684e444131597a41304e6a46424e6b5a43596a42324d42414742797147534d34390a41674547425375424241416941324941424e744861433952416d722f56686548423236615656732f39327346792f724f43484f51654377766c6b5767726233610a2f467331435a69474a4c6b387549507858377a4344736e3353574c63776948794e39645153596f4e7475537862414a41655859617630747936534775704835550a463277527a65637564566c4e667759302f614d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4541353479656659377a416d6b797866495751657a6134514f745350614e4730446646494a3544437239624a4b314953635377384a7167454b730a6d3238764b68567a416a4230536e6e58364f764555507a6e7553665a46426e5634323069622b35474f6f794f4e425772757762676578627177554462613344440a443564727879724663616f3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79d',
    '0001f1f6619b38a98d6de0800f1defc0a6399eb6d30c00000016000000123a74656d706f726172792d646f6d61696e3a5f593d2cdbdd7fa68737d931a51af7c0af7cf2c8a40ed076ce1b07d03c53705725ae5577ee3c4e0c820cfd3603a6b58e9ae1eb82f86ddafa2c666932a6b6d89fff69f58500000041d3847defa8d5a51a7bf4162ced072ed47991f5d337738bb8388e4a98bc6fd69f3f7e5da723705c9a1fdb32f36c4c00b9bf172327c43a5f203c43fe4b86d1df5f1b02fd072b2c3533ca5db8cddfb05692181dec80bc0a4b5ae3fe66b08a84fe3f4b150230b0dabd08d49c1bc0455fb6e96cf30f70669b55534313ca506a473e9e5f1fc0000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749556231556a3235346667744b325a7173626d5a59523437306c702b4577436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765455978526a59324d546c434d7a68424f54686b0a4e6b526c4d4467774d4559785247566d517a42684e6a4d354f5756434e6d517a4d454d774868634e4d6a41774f5441354d6a417a4e6a49325768634e4d6a45770a4f5441354d6a417a4e6a4932576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234526a46470a4e6a59784f55497a4f4545354f475132524755774f444177526a46455a575a444d4745324d7a6b355a5549325a444d77517a42324d42414742797147534d34390a416745474253754242414169413249414243534b47704b49344f4b7a745249376834574c5043544c33744231395a684e463166653370544974464b5472554b700a4a4f635178732f6e544d4f64696e3949716f3967676e566b624e507a7172524f4268653774772f486c524b6c4675727a745755464f703635326976446c3351540a466f784a62557254483330416e644b4f334b4d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a45413835723550492b57447873534e49414b385a2b4862643666364c2f593170456959654e5a6a67673668514f2f302b53734d476a6159612b420a46672f446a374838416a4230704d454f4a56747054747945524970574274694d42634d67362f637356695449767654586c5666672f686f3373587a4d6572627a0a5647746d646a6368726b513d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79e',
    '0001f7edc8fa1ecc32967f827c9043fcae6ba73afa5c00000016000000123a74656d706f726172792d646f6d61696e3a5f593d2cf704a58cc9ac7709e992b28e6ba14b89ce4e5a84904743103a580dd09158d9858246f73a2362999eaebee6309444c1f3fcf288c24e32c6f12e70829b7dbe579500000041f51c88ce693adb33d439c91c23cfc00f03737d7553ac86fd7d3350171212baad4696f83ebdc5ba54c005c55039b2479b88a1d200af718385fdb67d212bbc59641c03170cb65c5d50b0a9f2c93943089b2414f0682face1f1b5174843352ce5951c3f0256201f115d565e42c75783784734e790d07e8ab48963c024a85a2974ef15b09b000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749554332686a4b4e6163382f6d61416330716578644330373341582b4977436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654559335257526a4f455a424d575644597a4d790a4f545933526a67794e304d354d44517a526d4e425a545a695954637a59575a424e574d774868634e4d6a41774f5441354d6a417a4e6a4d355768634e4d6a45770a4f5441354d6a417a4e6a4d35576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234526a64460a5a474d34526b45785a554e6a4d7a49354e6a64474f444933517a6b774e444e475930466c4e6d4a684e7a4e685a6b4531597a42324d42414742797147534d34390a416745474253754242414169413249414245645a6a654842726347644f454976424f43446a4b65704d6f303258526e79304b71562f3862747339516a3667504a0a763334797642466b31626a4d63374648562b47525a617176545a757865366c694d6a57666b51354c6c50763166325647474a792f5130452b4430636c3353442f0a4f32764245324b5432565244792b596e2b714d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4541776b326d7a6233574668735533766d4268722b4c4768442f6b48494d6c65477342584b796c4363636741784b70336d4e6e4861467369364e0a6c6963475a72584d416a424268727363567a683558307a384a49497468396337584a78556131664d6d6d5a63336b6e4c486f585a7a4b4c366878346e492f4a310a2f71676a6e714e6e76676f3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79f',
    '00014cceba2d7d2b4fdce4304d3e09a1fea9fbeb152800000016000000123a74656d706f726172792d646f6d61696e3a5f593d2c8dd3177aa48594ad5bd4d289055b64ae990a9b8b70434da92ea1599bf766b600831a759b9c94b860d540b15f71d0c9bbc35953e5c306bb8b8f91da9298432b5c000000411763c36944ce97078383378af2499914a5cadc1404bd25a40a411844649ef9913c719f68c9c557037722288e9fb0e650f3a958a3c1647460e79986bc49d2d0fd1b0332a966aa2a2b5ee449d41ae572dd0bffab7b3c7d7668227115924822116bfdac02259a2a302a032b7e2d953d8c86fc8a6247bb2b81d597791b9c3d90e206d063f8000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942355443434157716741774942416749556458514b3042527a4c65377867746451446c75762f392f6e72536377436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654452445132564359544a6b4e305179516a526d0a5a474e464e444d774e47517a5a5441355954466d5a5745355a6d4a46596a45314d6a67774868634e4d6a41774f5441354d6a417a4e6a55795768634e4d6a45770a4f5441354d6a417a4e6a5579576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e454e440a5a554a684d6d513352444a434e475a6b593055304d7a41305a444e6c4d446c684d575a6c59546c6d596b56694d5455794f4442324d42414742797147534d34390a4167454742537542424141694132494142476d6b4a4867315172706a54333334676f6c3039746179316d792f6e3935792b612f453844656d4f704b51693258580a48796b2f6d3739436b4d574f494f2f38615a6c7463704f464c2b6159734e58634d7a476865785955616c62424e5254514b763661624f736136365853325434580a59757675724b5664394241466e43514d594b4d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e700a4144426d416a45416d55456250694d772b5a44427531757558714131554a633373654668524b44736e4d5a39735a77384d4e5332634348655379474e306342780a62645575442b4143416a4541364b612f6944586d395032654762446d774b494c50324e4b4f664d7173724c446a76304c6446543552636a5332502f317658464d0a4d5534386a55766c364957310a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a0',
    '00013da8d322cb2435da26e9c9fee670f9fb7fe74e4900000016000000123a74656d706f726172792d646f6d61696e3a5f593d2cbbff43453245b9fb1d58606cedfd18cafef68fd648c324ee9da076ac79839ff7b9de3756df26a055ae9e3ed2637b6638a785572846f133c8df3ce747abf7e5df0000004102edca7e306c31fe06af9f43916e1128eb16ba29415f1d01211f2530c0cb92ce13eb7174ca5fc1aed5ff022bda01b6b2ab2beef9c3a3f424a5b4baf43368178d1b03942781ebb8f470b31f758a4fa1e2c310ebd39140e772fdf16b64d85af8c2a3380304e6a8579f623d3c8600e8f98422be024ad06dee2948bef462121105210a8a76000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749556664442b5a4966513574624d6559693453784770334c477a72685177436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765444e45515468454d7a4979513049794e444d310a5a4545794e6b5535517a6c6d525555324e7a426d4f575a434e305a6c4e7a52464e446b774868634e4d6a41774f5441354d6a417a4e7a41325768634e4d6a45770a4f5441354d6a417a4e7a4132576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344d3052420a4f45517a4d6a4a44516a49304d7a566b5154493252546c444f575a46525459334d4759355a6b4933526d55334e4555304f5442324d42414742797147534d34390a4167454742537542424141694132494142426463477a7a5a786865554c3235576453796d5a6e714f696f572b4c4d5753543338694759526e347370424a574c6d0a6a6d59674d654557747a48364664714658676b4f592f6e546c325449344858494c7243706d3475356664577564585456666f34684966306e4f4f2b775a6a37670a564d3076416d344f343037783877372f4d364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a45417a6d4d364c4e59735a732f71555a697668444767506870794d754c7431356b39594a2f677847676e7332546431665a43623550456d4a39700a6e426b4355583043416a4131767631426b48534f662f3761635a4a784866556c664152597165536e582f39653338703831326a66514a6b684177687356365a430a6f314c69374a47576d32383d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a1',
    '0001dbc23ae43a150ff8884b02cea117b22d1c3b979600000016000000123a74656d706f726172792d646f6d61696e3a5f593d2c3a9a1f028dbdd0723bd244bc3e06a3b4d2b254622dc9b5e9469a0f00fedcb0b108bcb9c310aaacb15a6714d6376b87d898bf7f3b8376168dd41e636b6b0664aa000000419413e0ed684060ebdc48cfacfcff64550affa652d89bd90dcba0644228d0f2d03b6397dec6d55ca7e6257fc143d413d8e3a5ac265a9ac22b0c27e00066908c4d1b036633eee409ce433fbd9a504a97f4b3efa5506a0ce1fdc77ca573c579a9b798e30360d5967444efc24fd2f4839a75776071d8a050c1450b00b29a016edb7e1bcbde000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942355443434157716741774942416749555a46386c784d3873524a34784231464d2f64702b3945713735475577436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765455269597a497a515555304d3245784e54426d0a5a6a67344f4452434d444a445a5745784d5464694d6a4a454d574d7a596a6b334f5459774868634e4d6a41774f5441354d6a417a4e7a49775768634e4d6a45770a4f5441354d6a417a4e7a4977576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a423452474a6a0a4d6a4e425254517a595445314d475a6d4f4467344e4549774d6b4e6c595445784e3249794d6b5178597a4e694f5463354e6a42324d42414742797147534d34390a41674547425375424241416941324941424232655646744e785848584b4b433036503630384b4e306666336a5772302f3357646f4875477a5957684f445669390a4437724453425071394f72346276435274784c6579586a4b43694d764c4c493548496e7843714b763163747463735851474b6c6d3733304841494238344a79710a7a47674e57647a534c446c416654776e2b614d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e700a4144426d416a4541315366304c616a713044524946735765746d7a487a5a5a396f4c47547a6e39693973306a38676f37447633465230687976596c77383075390a2b744a5965617279416a45412b762b4c2b753841385342564c376e50656166632b2f4b627042612f304831547448774550615772395a4d41364d6d65453631710a572f59586c6138775848462f0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a2',
    '000168e527780872cda0216ba0d8fbd58b67a5d5e35100000016000000123a74656d706f726172792d646f6d61696e3a5f593d2d856c42a3d8ed363eea5b59c5b63b1b9be4a9ef0ccfe391a34ffc0bf387caa4b9cb0f778347a94bfa996edf5adbf943dcc9dce900d2df1c7dd63593a0cf34c61e00000041369704de40d33e0f6d2599757cebbf5f61545fdc4c720e2627cfdb288eba4da55207f08ff2a36e4a78be38888f536f25658a98d7c408ddbc82d61f2082862bea1b03b52e5ae3cfe92a46a12f3123b039d1d81e32343ee7ace499882af233c78277a203c81667f20095849d68637b2c83c4c3473e074d76d1869f7e148b366cd5502c85000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749555371682f4b6838546742706f5873634b75716d774e79377556345977436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765445934525455794e7a63344d4467334d6d4e6b0a595441794d545a435954426b4f475a4352445534596a5933595456454e57557a4e5445774868634e4d6a41774f5441354d6a417a4e7a4d305768634e4d6a45770a4f5441354d6a417a4e7a4d30576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e6a68460a4e5449334e7a67774f446379593252684d4449784e6b4a684d4751345a6b4a454e5468694e6a64684e5551315a544d314d5442324d42414742797147534d34390a41674547425375424241416941324941424c64622b43334d5a674e39472f6672564c6a3679686e6472713331496a5a45544c5a4f464162622f52536d354d6e570a6b622f6c7264335162586272353238417550626e6579524361473374494e4b492b5977714f54483963785a6b6c33516e38456355384e6b54365035593131384b0a7831383367776c53674642695958366579364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4541325246466649475532673146734361446c4f59427a426449313375656144727a565245494c63577647635968543835764658737435374c350a46534b6f72435475416a42726c5a33337669677852764f6f304964345938645142346f425848716c786949422b584f4b7a4a4c735a38534532706a3172584d2f0a477a2b774c5139576144343d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a3',
    '00015a83529ff76ac5723a87008c4d9b436ad4ca7d2800000016000000123a74656d706f726172792d646f6d61696e3a5f593d2dab01fed200ede90a6cb05fb3ede24a1ac6db11fb5371ef25248862dc4ea49943042df65df723434616887fd83c18933be508abdbd4c9ffba4113f28ada18524b000000416e47ce353aa3f4c02b7b54674b14e537168db185db950e9c9570e93a7e7b6c805691027167700749f17088d679e933ad8a651ab284f3fb947979674d6b248e571b02213cfdf1b442ea500febe9bf7a50eed7bf1956620df47d2626f7c3da8e027f6e025825fa58fcca874e460a586e8e7ebd32518afbdb56014b619eccb1759650c164000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749554f576a5a7068595869504270356b706a306a585063585a5648664977436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654456424f444d314d6a6c6d5a6a633251574d310a4e7a497a515467334d444134597a52454f5549304d7a5a42524452445154646b4d6a67774868634e4d6a41774f5441354d6a417a4e7a51345768634e4d6a45770a4f5441354d6a417a4e7a5134576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e5545340a4d7a55794f575a6d4e7a5a42597a55334d6a4e424f4463774d44686a4e455135516a517a4e6b46454e454e424e3251794f4442324d42414742797147534d34390a4167454742537542424141694132494142424e595470424a643566346b44346876557a625a4133434d6769362b463262316152374d43576e2b353633546c37710a643773643066456761684364726e5444333452415756652b59496f582b596148507543776e314d4e6146396472596a48315651514f3051715753616375424b500a5972696a55465253315863504c397a6e4a614d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a42716f7a6334554b6c4d5665464a6c2f314a4a6f2b6d354954337032774e5842697749313876663530444b4a777a792f376b6672714f494b70610a333868484a6673434d514444562f62656172346654643245724c4c575643626e786e41384679756b716b4867774650646b4275695a59326f4d36575a78614b780a576b502f38587745545a4d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a4',
)

ursulas_v2 = (
    '0002e57bfe9f44b819898f47bf37e5af72a0783e1141000000123a74656d706f726172792d646f6d61696e3a5f5f4992796a4d3a22d2e68e7215c5f8c6cb9f01ad75723efd13427dec264a7a9d4d5b852c95a38fcdcd38b49cf6d04f384249ea9c3f79e2758c9650f3378e04a8baa72c000000410a2698b95780a8be3fea07a06e1b4d2f66aaf448ace856c3392216907b8c81e041085a9ece33ca2a4b51c2f6fe664a099ef847de9123695950c5c8235b4d6fa51c03358c067554adb682e5d6fbe7ddc40fe68376a1057532ceac81906e5c86dce1a403d3ce591da9a486bd0b21f6fe62b09b4cc1bc7a15d849c539319dd151c2e76cb3000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949423544434341577167417749424167495563514835355a5457774c7a507a4d6c43385050697a4561486a336b77436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654555314e324a4752546c474e4452694f4445350a4f446b34526a5133516b597a4e305531515559334d6d45774e7a677a5a5445784e4445774868634e4d6a41774f5445304d5441304e4449775768634e4d6a45770a4f5445304d5441304e444977576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234525455330a596b5a464f5559304e4749344d546b344f5468474e446443526a4d3352545642526a6379595441334f444e6c4d5445304d5442324d42414742797147534d34390a41674547425375424241416941324941424177446e536b557a5750437165313375367539324d67496a2b5351662b6c775543396e304d4f7647536239583041610a34794e6f48656e35464353514c504f69344d385765632b716567615a6737646b6c766f596c4a5557636e6e7856474e38776f4a2f4a33356c795261613964504a0a3451526f4b70612f543738644d75643738364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a454134705932637169596742446537622f5930414838576d6f46355062455579655a7343714351785330384b5969304f6845393645745a7444570a6f6d4d654f693472416a41786663563437462f74383361304f72306e50514979362b4b4e576758796d583161424b2f7341533164674b6264652f4e2f495748320a494f377631494133326e6b3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79c',
    '0002d41c057fd1c78805aac12b0a94a405c0461a6fbb000000123a74656d706f726172792d646f6d61696e3a5f5f499207a5b9573b1c867a42bae625bc8bc254e64c283c44e94370973d64429c3acc0146ebe699d0362539a8bdf887d3759c643399e7d22705520d9af116c07bc4065900000041dc5bde4836719e5d366e525770073117d144c7a8778444a26e652d8466664c6d27b25d78f7543138711006ccb8b647a451ac3f81b7369fe6841183704f7d94ab1c03497de53f1fd0d76860c9b32e9a0fb83fa56f078c93d41ffff6df4c90243f02370223c698f4c458353213970a669c917fdad7a885964e28f88a2da665a0881a1256000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749555777675237543642786b42776671574870762f415546497352537377436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654751304d574d774e54646d5a44466a4e7a67340a4d44564251554d784d6b497751546b30595451774e574d774e44597851545a47516d49774868634e4d6a41774f5445304d5441304e4449795768634e4d6a45770a4f5445304d5441304e444979576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42345a4451780a597a41314e325a6b4d574d334f4467774e554642517a4579516a42424f5452684e444131597a41304e6a46424e6b5a43596a42324d42414742797147534d34390a416745474253754242414169413249414247615943785669314f61325350427531656f7836756a6f5639414e435a58555a77623479703736633354305072772f0a5a746f46385942506b37522f6a7a636e3267766e6a78596d5a594b51654e536130616e76336d4c537a4e69526256554a4a786f70576330775865716a654161300a45486864416171387a316e4547684c716e364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a45413858455a386a63536a414d7a4a676d5973304d714b47626a364477362b57616369797449554d6b794d45734e324d7552386e7939535550460a45564d6434613374416a417a655337702b313262326550374a587537312f594f424741457858684130555469442b6737307151544b59424f644d374b4843716f0a67513632636f6474314a383d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79d',
    '0002f1f6619b38a98d6de0800f1defc0a6399eb6d30c000000123a74656d706f726172792d646f6d61696e3a5f5f49921cf668fa4a688689e79d4b0866fd1e08efef8fc0bc04af68170f97ef4aa6360ae2b8c605a9a5ea976dac756641eecaee2e18a672ca60f97fce49faa2616b6e8e00000041c1eeb0b911b85525854b96af35cf15ee5605fe9c581492d23a7822643f55f9a20f862de8f1c151591c76914ec9e9b550c962bf36adf5dfa30b0306fe1061684d1b0263e45d32f730e73aad42661a0446c7d79161fa85c9ffef815269979d29aed11003f983698b483aa3c1dda10ffff0b24a26b982c89529ee1db1729be2a6a522abdd000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942347a4343415771674177494241674955633645504c4f485a50777836743658454752303056625666524a6b77436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765455978526a59324d546c434d7a68424f54686b0a4e6b526c4d4467774d4559785247566d517a42684e6a4d354f5756434e6d517a4d454d774868634e4d6a41774f5445304d5441304e44497a5768634e4d6a45770a4f5445304d5441304e44497a576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234526a46470a4e6a59784f55497a4f4545354f475132524755774f444177526a46455a575a444d4745324d7a6b355a5549325a444d77517a42324d42414742797147534d34390a41674547425375424241416941324941424f586d797162324e7476763541796b745177422b3978584f557154422b38526b6a4342784c71794e74617a6936794f0a3458646f777833374b55745a4e4d773348354467394b6e6a4d3774644a674e4978726736786d2f6736546f7379426946474761332f7a77616e6d674956384d2b0a46796f4f474f784563515078677a527a57364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6e0a4144426b416a4150305a63492b7947315a4c42414859334e432b37633054753767545459336e376b356d785548344c314263726b6f49387545314f77502f53780a73784769717863434d41742f5348434b4b39766a414d344530774b483944514d4f57766d7a384e70657850376d58585a755a6b3776544c6945652b66725259500a5a6b4548794c2b7944513d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79e',
    '0002f7edc8fa1ecc32967f827c9043fcae6ba73afa5c000000123a74656d706f726172792d646f6d61696e3a5f5f499231b6ce8731d78f2992daf122ecf1c2eb62ecc916787aa46325912e287a95ffedcdab54b9a81919385b8514f7987fd4d2decc2f2aa2c8aad8abb01d09e041fbe0000000418e88e6db3545de3e559ed94c80e539061f6831f00d406282f23c0713fc22c089422ee743a1fd07fc8a4b43ad4220cf13461906a7144ab55097febd1c7c03275a1b02080211dbeb2a5ea8af36c4c8b2f99b26202c5d9f18b76ead528bb88751243770029d35389f46fd6bbcc7d72f7fe225dc5526607933f37ffbf208f7832f943bc23c000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949423554434341577167417749424167495562326461702b336741476234554b767141412b54574b767832657377436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654559335257526a4f455a424d575644597a4d790a4f545933526a67794e304d354d44517a526d4e425a545a695954637a59575a424e574d774868634e4d6a41774f5445304d5441304e4449315768634e4d6a45770a4f5445304d5441304e444931576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a4234526a64460a5a474d34526b45785a554e6a4d7a49354e6a64474f444933517a6b774e444e475930466c4e6d4a684e7a4e685a6b4531597a42324d42414742797147534d34390a41674547425375424241416941324941424954312b31536d48336b5a5873305144654d5a32584f4d614a542b36567032424d682f46355567376e5072556654440a564f54384d3672506d4c70306b31467a6a397776344a2b583839707275797641625471714a346f6138705a474a37516d6666506152765a7a6b4f3776383879730a534a754147496e7a42696f7547714e5938364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e700a4144426d416a4541387158724e53533371756a4a664c2b3750592b6572395a6e4873674a2f587a484d42586657567362706d612f582f555832586278755574310a5a64766a686c6b53416a45416d4d7375393175776d6261754a5764707a33746b6e45776c427855696f7142464b6e684538766c4632445347434f3532693454340a557679696d657878666439570a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c79f',
    '00024cceba2d7d2b4fdce4304d3e09a1fea9fbeb1528000000123a74656d706f726172792d646f6d61696e3a5f5f499292e0b1f461903c96d97cebb5104173a59a9a1a665198916d6cb2dc457f636e6cf96a0edb16625b21d1f036cc6c0c4504580287450a725112d3aa6543a08d9b070000004152797ba06824b91f0265a24aab9ce468e07640665c4f4cb2927b3b871b7481d6359726ad4f28ce3a55299bf9df12f81ba8934c5617032d22615495cad8df98371b03e2564124a21a3db73179e37c6134e7ac291b12ede6ea7212d859d949a2f8a95202988b67b8c03021ddaf78f115598bc93e62b53bed165546e1c4ddba0e2bcadcd1000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949423544434341577167417749424167495547416f3543374f77505a73416f444c474c4f5331474f7062634d6b77436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654452445132564359544a6b4e305179516a526d0a5a474e464e444d774e47517a5a5441355954466d5a5745355a6d4a46596a45314d6a67774868634e4d6a41774f5445304d5441304e4449335768634e4d6a45770a4f5445304d5441304e444933576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e454e440a5a554a684d6d513352444a434e475a6b593055304d7a41305a444e6c4d446c684d575a6c59546c6d596b56694d5455794f4442324d42414742797147534d34390a41674547425375424241416941324941424b6870763744544c41696976596d77325238355259574273476253536f53757362414e304765793938462b413877550a4d5546686f2f5a6b46753236352f6b46337137704173724d38374f386e73487451726e53365964374c325a4b73752b47494d6b4e564d316b6346334e386d52540a7547546d45633970364130356341524958714d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4238667a4274764f4a51473336694b464454766170624d69334a523564786337636f684863514e6c657a3744497430726c33454978683379754e0a49747a52447441434d514375566e577155622b4e2f637771636a634a47745447654c3178414f49554f42556958524e6178485358613830742f722b49714365310a4e3931736f6847444554413d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a0',
    '00023da8d322cb2435da26e9c9fee670f9fb7fe74e49000000123a74656d706f726172792d646f6d61696e3a5f5f49924981395a9540133bf1579d81c19a327087580ed8d4d5e94090c2b8c2c101e28fbb21d3e7fa2ee4802581f43b52560b55ff5c9b1dc14b64abc05b296fc1f5e48b000000410329a47aa9af11d0ae6dde6780f8b59295a63264b5f44607a9cb2a887e8f63ef07e3488d863770aa422952edbe18c97219b5c5e2df43692d9a3f64cd394fa5c01b02e70b19d70b8bd56d5040479ae8d6a94f862988357be591e7595d02b1f654c46e028ebe1b69801012c4bda06e522ef71e4386f789b969c4f4a9fa9c78ffe9ec69e0000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d49494235444343415771674177494241674955514b6c4e732f7032556576392b466a4b334a32626f53666358454177436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765444e45515468454d7a4979513049794e444d310a5a4545794e6b5535517a6c6d525555324e7a426d4f575a434e305a6c4e7a52464e446b774868634e4d6a41774f5445304d5441304e4449345768634e4d6a45770a4f5445304d5441304e444934576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344d3052420a4f45517a4d6a4a44516a49304d7a566b5154493252546c444f575a46525459334d4759355a6b4933526d55334e4555304f5442324d42414742797147534d34390a41674547425375424241416941324941424a4c4947745a48532b63376f753348553435546142326e2b503836714c6e67506f476269305037645461524c3437650a78542b2f4a4f64766a3877707453557957467662732b71697756346f334d3451395a3353764e6f77776b42646a4d6139687052596c50324a43676234474e34720a626573335a547137354769785741396641364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4541717733684d7667324b4842397139516736436e33513041514f5a654b414e51393174666c64303642352f426b494248737031357a616e73610a6a63445770344133416a41584835445465334d5364556e62477a2f667435746f632b7a4b4f2b41655344514e345247786b667a68414f537564455a646738714e0a6f676645506a32314735493d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a1',
    '0002dbc23ae43a150ff8884b02cea117b22d1c3b9796000000123a74656d706f726172792d646f6d61696e3a5f5f4992decb80e20efa366b3f73986040d5386c68ae76c30f7ee590af1b0e8a9863d69c6b9743f20c69e9253744d5346ce427505677439149738ef9419cfb6399182a3100000041ce404e18af2bd8fb27c5a84c9a9d34a32d21f13b5aad9af6b56dc9636f85ef2048dd9e200a580ea726282f7858df36465bf377f78b165bb92bcb0f1f1bf9b4d91b03489e298796bf184baabe5d6b8f069762fd6469a44c31edbdd39fab75554233200233066c9f661c6e8f746eed7c3d7ffb30e89c293161cc3ae9c7f69d6680de1c2c000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d49494235444343415771674177494241674955645567397774633035376872796a326746614f4a4f73656539414977436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765455269597a497a515555304d3245784e54426d0a5a6a67344f4452434d444a445a5745784d5464694d6a4a454d574d7a596a6b334f5459774868634e4d6a41774f5445304d5441304e444d775768634e4d6a45770a4f5445304d5441304e444d77576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a423452474a6a0a4d6a4e425254517a595445314d475a6d4f4467344e4549774d6b4e6c595445784e3249794d6b5178597a4e694f5463354e6a42324d42414742797147534d34390a416745474253754242414169413249414241386c3843413243596861744a7039686d436a4768576c4d31436b456b504436554c4a617a2f2b4a322f6f5737504a0a4254466d747265643948645a457659335a575a356b73795350556c774d4b7a655a644b746a6b566758482f50575733347137616f59586d4e63615874744c48410a754876744c6b4c73776c454c457334674a364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a41374f73695667467567556f422f3971477879796a2b44494e3176345649623145434d5838466158303930416a50387437504961615242664f580a356743792f5a41434d51436a2b6c4f37706138496534414d32674751324f6b4b6f4d4775766a476a6e7349584b6a51685479644e34396e6136354262564459330a4d313475544a62453451413d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a2',
    '000268e527780872cda0216ba0d8fbd58b67a5d5e351000000123a74656d706f726172792d646f6d61696e3a5f5f4992a725ac643b499c11d1d80bf23bfd9171f02052afa9f3de09a982eec2fec32caa15da3785c2ab227e55c53e14e8c676d6db7b8ebe7cf11679214c3c59b708f7bf000000413adde5df9dffe3d93b658ba9ec523db38d76534caad41c4143eba662c2b81f5d0387c2ed9802c68a48087d8b8712b1f3dd59a2edc5c4d6232b085e411d9d1e6e1c02b257de9a118e9bfaf7b1d4f65117aae3b5345058b8234c78d5354da6da76616d0241b7c08af5a62f6db9e5db720b0bc1dae44b039e994a362a57ed255808c20504000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942354443434157716741774942416749554f394570544c35376433355a584c59534c46576b6334424644734177436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f7765445934525455794e7a63344d4467334d6d4e6b0a595441794d545a435954426b4f475a4352445534596a5933595456454e57557a4e5445774868634e4d6a41774f5445304d5441304e444d785768634e4d6a45770a4f5445304d5441304e444d78576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e6a68460a4e5449334e7a67774f446379593252684d4449784e6b4a684d4751345a6b4a454e5468694e6a64684e5551315a544d314d5442324d42414742797147534d34390a41674547425375424241416941324941424a78514566476e716257394e754476714b527a614869734f7443766f4b737a52397768415a3749484f76546d6d72700a5763564f3731585135427333476b796f5063304359773952766d64662b7337324e4e7a596d304f5456586930446558656c5a43646f5a3449677777586c7446390a326630713772352b3059585950556a6751714d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6f0a4144426c416a4541702f455a35717756312f73576f32514f37452f777863376f2b663959664735534b793151574e532f3349737464524772516f7347614344740a4a502b2b696c424d416a42514b43524e6343676d6c6b6f396e2f795444397259424638726e6d6167394e6f6d714b49465468626348616f625763504d33774d4d0a7a514c54326867754b65593d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a3',
    '00025a83529ff76ac5723a87008c4d9b436ad4ca7d28000000123a74656d706f726172792d646f6d61696e3a5f5f4992754a5a73ad1f61d3764ce25d6f9d7f801a0415eb00e5500c556909712d2f01c48aabb3ea646dd66ed3f57dc0c9f2f8b5e6b8e2db020acdca1c2a8e501f49115500000041812d1cbbdf46721689f7c638b3a99ca261761995de8c162bf9d135785d83f7041a2e3d81e3058e88cc45db3dfabd89a8c15f7ae2e53322e51ac616a690714a021c0391c79579899bbf801fe2cdf2b1c6ac8b3a0d09d60bdf6583107eaa7f2dac969e03f756ab6504ae93cee52b7b0051b364b45661d523f8cd16bef42c2326ab92791f000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949423554434341577167417749424167495553555158626833423974714f6a4169566b6b626c6f54316744393877436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654456424f444d314d6a6c6d5a6a633251574d310a4e7a497a515467334d444134597a52454f5549304d7a5a42524452445154646b4d6a67774868634e4d6a41774f5445304d5441304e444d795768634e4d6a45770a4f5445304d5441304e444d79576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344e5545340a4d7a55794f575a6d4e7a5a42597a55334d6a4e424f4463774d44686a4e455135516a517a4e6b46454e454e424e3251794f4442324d42414742797147534d34390a4167454742537542424141694132494142495736624f51794d68516e793658714657396637374a65635231784a636256357a726f344e472f77577663614a76740a7275686767375839672f614b6367664b5964756d506d682f4170344261736249527832664664514b3342645054474b356a4e30646458365231346144315a46450a4c3266574d7432444f644746416e6a7430364d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e700a4144426d416a45416b362f374b746a6a4a496f596d634377544a71577172322b54472b6e4f7065454f357a614f736d53695651657061703343353156523658790a774f2f464671684e416a454178563174315952524645425749375857704d4d56413858586f4f664f49716237796851676a387874644d4f386c51374b566277580a314e7a30537068436367345a0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a4',
    '00028735015837bd10e05d9cf5ea43a2486bf4be156f000000123a74656d706f726172792d646f6d61696e3a5f5f4992894077589d998f80e69a81164b5739d92e9cfa74d7d58120bddea716338c756d171f2a034227c2d9923529646e00b55fc86d9962b1e7e7640d367e5ef8f51f6a00000041dcca8fe98d7f394b64dac38671b0553c4116c14c5cbc6bc79b10ab39668475d312cb51596e3930a13b9d0979921dc84812ea26d12fba604a9af865f763fa27de1c03ed03e383d8acde399a630fdee226bfaefcdc55598ad3132e124af568f0b85c6b026aa8aa2e53aa80c7521d73a6f9e02b90e5a0cd8b5c9eee70f28af7447f811a74000002cd2d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494942347a43434157716741774942416749554b616974387064592f565a6a55686f672f7937344447724258423877436759494b6f5a497a6a3045417751770a535445534d424147413155454177774a4d5449334c6a41754d4334784d544d774d5159445651524244436f77654467334d7a55774d5455344d7a6469524445770a5a5441315a446c6a5a6a56465154517a515449304f445a435a6a52435a5445314e6b59774868634e4d6a41774f5445304d5441304e444d7a5768634e4d6a45770a4f5445304d5441304e444d7a576a424a4d524977454159445651514444416b784d6a63754d4334774c6a45784d7a417842674e564245454d4b6a42344f44637a0a4e5441784e54677a4e324a454d54426c4d44566b4f574e6d4e5556424e444e424d6a51344e6b4a6d4e454a6c4d545532526a42324d42414742797147534d34390a41674547425375424241416941324941424e6a6e6c73487576466f3367594f585152347a414f316c4f35304c684d715a6c5132517268307143665146506e68770a627433316738515351634e6672674d44754b575474734869364263335839697275712f4a374a6f6774302f623957636334666e70735879556e5443375377627a0a6c325635566c4c4b5232446754416a416e714d544d424577447759445652305242416777426f6345667741414154414b42676771686b6a4f5051514442414e6e0a4144426b416a414b6f6e4a63353533786f2b4343743863743541544a7754546f4d54746b7047773454416f543365674f6f556a706f41544a65724f66426b45410a37416f54594e4d434d4263786b6978334f344d31356b68704a6b4e4f47434150555a6f497939366e6f366530427754387859466e4f31547762476477337876770a314d3477556c666251773d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a0000000e3132372e302e302e313a0000c7a5'
)

versioned_ursulas = {
    1: ursulas_v1,
    2: ursulas_v2
}


def test_deserialize_ursulas_version_1():
    """
    DON'T 'FIX' THIS TEST IF FAILING, UNLESS YOU KNOW WHAT YOU'RE DOING.
    The goal of this test is to show incompatibility of current Discovery Loop version wrt to version 1.
    See issue #1869 "Test with a hard-coded, versioned node metadata bytestring"
    https://github.com/nucypher/nucypher/issues/1869
    """

    expected_version = 1
    ursulas_matrix = versioned_ursulas[expected_version]
    for fossilized_ursula in ursulas_matrix:
        fossilized_ursula = bytes.fromhex(fossilized_ursula)

        version, _ = Ursula.version_splitter(fossilized_ursula, return_remainder=True)
        assert version == expected_version
        assert version != Ursula.LEARNER_VERSION

        with pytest.raises(Teacher.AreYouFromThePast, match=f"purported to be of version 1, "
                                                            f"but we're version {Ursula.LEARNER_VERSION}"):
            _resurrected_ursula = Ursula.from_bytes(fossilized_ursula, fail_fast=True)

        assert UNKNOWN_VERSION == Ursula.from_bytes(fossilized_ursula, fail_fast=False)


def test_deserialize_ursulas_version_2():
    """
    DON'T 'FIX' THIS TEST IF FAILING, UNLESS YOU KNOW WHAT YOU'RE DOING.
    The goal of this test is to show compatibility of a hard-coded version 2 bytestring.
    See issue #1869 "Test with a hard-coded, versioned node metadata bytestring"
    https://github.com/nucypher/nucypher/issues/1869
    """

    expected_version = 2
    ursulas_matrix = versioned_ursulas[expected_version]
    for fossilized_ursula in ursulas_matrix:
        fossilized_ursula = bytes.fromhex(fossilized_ursula)

        version, _ = Ursula.version_splitter(fossilized_ursula, return_remainder=True)
        assert version == expected_version
        assert version == Ursula.LEARNER_VERSION

        resurrected_ursula = Ursula.from_bytes(fossilized_ursula, fail_fast=True)
        assert TEMPORARY_DOMAIN == resurrected_ursula.domain
